# =============================================================================
# ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env.local: cp .env.example .env.local
# 2. Replace placeholder values with actual credentials
# 3. NEVER commit .env.local to git
#
# Generate strong secrets:
# node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# =============================================================================

# =============================================================================
# Application URLs (environment-specific - REQUIRED for CORS)
# =============================================================================
NODE_ENV=development
APP_URL=http://localhost:5173
DASHBOARD_URL=http://localhost:5174
MEET_URL=http://localhost:5175
WIDGET_URL=http://localhost:5176

# Staging Example:
# NODE_ENV=staging
# APP_URL=https://staging.platform.com
# DASHBOARD_URL=https://staging-dashboard.platform.com
# MEET_URL=https://staging-meet.platform.com
# WIDGET_URL=https://staging.platform.com/widget

# Production Example:
# NODE_ENV=production
# APP_URL=https://www.platform.com
# DASHBOARD_URL=https://dashboard.platform.com
# MEET_URL=https://meet.platform.com
# WIDGET_URL=https://www.platform.com/widget

# =============================================================================
# API Configuration
# =============================================================================
API_PORT=3001
REALTIME_PORT=3002

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL="postgresql://platform:platform_dev_password@localhost:5432/platform"

# Service role with BYPASS RLS for admin operations (registration, system tasks)
# ⚠️ CRITICAL: Use ONLY for administrative operations, never for user queries
SERVICE_DATABASE_URL="postgresql://platform_service:platform_dev_password@localhost:5432/platform"

REDIS_URL="redis://:platform_redis_password@localhost:6379"

# =============================================================================
# Authentication (Auth.js / NextAuth.js)
# ============================================================================
# Auth.js replaces deprecated Lucia v4 (March 2025)
#
# CRITICAL SETUP NOTES:
# - NEXTAUTH_URL = Backend API server URL (port 3001)
# - Frontend apps (ports 5173-5176) use Vite proxy to make requests same-origin
# - Vite proxy rewrites cookies (removes Secure flag for HTTP localhost)
# - All /api/* requests are proxied from frontend to backend
# - Credentials provider uses manual session creation (see auth/config.ts)
# - trustHost: true required for proxy setup
NEXTAUTH_URL="http://localhost:3001"
NEXTAUTH_SECRET="<GENERATE_32_CHAR_RANDOM_STRING>"

# OAuth Providers (Google REQUIRED, Microsoft optional)
GOOGLE_CLIENT_ID="your-google-oauth-client-id.apps.googleusercontent.com"
GOOGLE_CLIENT_SECRET="your-google-oauth-client-secret"

# Microsoft OAuth (Enterprise customers - optional)
MICROSOFT_CLIENT_ID="your-azure-app-client-id"
MICROSOFT_CLIENT_SECRET="your-azure-app-client-secret"
MICROSOFT_TENANT_ID="your-azure-tenant-id"

# ============================================================================
# AI Providers - Vision (Cost-Optimized Routing)
# ============================================================================
# Gemini Flash 2.5 (85% of frames - $0.10/1M tokens)
GOOGLE_API_KEY="your-google-api-key"

# Claude 3.5 Sonnet (15% complex frames - $3/1M tokens)
ANTHROPIC_API_KEY="your-anthropic-api-key"

# OpenAI GPT-4o fallback
OPENAI_API_KEY="your-openai-api-key"

# ============================================================================
# AI Providers - LLM (Cost-Optimized Routing)
# ============================================================================
# GPT-4o-mini (70% - $0.15/1M input) + GPT-4o (30% - $2.50/1M input)
# Uses OPENAI_API_KEY above

# ============================================================================
# Feature Flags - AI Routing Strategy
# ============================================================================
# ZERO_DAY: Emergency fallback to proven OpenAI strategy
#
# ZERO_DAY=true  → Use OpenAI-only routing (stable, tested, 69% cost reduction)
#                   Fast:     GPT-4o-mini
#                   Balanced: GPT-4o
#                   Powerful: Claude Sonnet 3.5
#
# ZERO_DAY=false → Use Phase 12 documented strategy (77% cost reduction)
#                   Fast:     Gemini 1.5 Flash (free preview)
#                   Balanced: GPT-4o-mini
#                   Powerful: Claude Sonnet 4.5
#
# Default: false (use Phase 12 strategy)
# Set to true if Gemini provider has issues in production
ZERO_DAY=false

# ============================================================================
# AI Providers - Speech
# ============================================================================
# Deepgram Nova-3 (Speech-to-Text)
DEEPGRAM_API_KEY="your-deepgram-api-key"

# ElevenLabs Turbo v2.5 (Text-to-Speech - best quality)
ELEVENLABS_API_KEY="your-elevenlabs-api-key"

# Cartesia Sonic (TTS fallback)
CARTESIA_API_KEY="your-cartesia-api-key"

# ============================================================================
# AI Providers - Embeddings
# ============================================================================
# Voyage Multimodal-3 (RAG embeddings)
VOYAGE_API_KEY="your-voyage-api-key"

# ============================================================================
# AI Providers - Reranking (Phase 10)
# ============================================================================
# Cohere Rerank API (20-40% accuracy improvement, $2/1K searches)
COHERE_API_KEY="your-cohere-api-key"

# ============================================================================
# Real-time Video (LiveKit)
# ============================================================================
LIVEKIT_URL="wss://your-project.livekit.cloud"
LIVEKIT_API_KEY="your-livekit-api-key"
LIVEKIT_API_SECRET="your-livekit-api-secret"

# ============================================================================
# Frontend Configuration (Vite - MUST be prefixed with VITE_)
# ============================================================================
# Backend service URLs
VITE_API_URL="http://localhost:3001"
VITE_REALTIME_URL="http://localhost:3002"
VITE_LIVEKIT_URL="wss://your-project.livekit.cloud"

# Application URLs (for cross-app navigation)
VITE_APP_URL="http://localhost:5173"
VITE_DASHBOARD_URL="http://localhost:5174"
VITE_MEET_URL="http://localhost:5175"
VITE_WIDGET_URL="http://localhost:5176"
