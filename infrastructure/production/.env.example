# =============================================================================
# STAGING DEPLOYMENT CONFIGURATION
# =============================================================================
# Copy this file to .env.staging and fill in your values
# NEVER commit .env.staging to git

# =============================================================================
# GCP Project Configuration
# =============================================================================
PROJECT_ID=platform-staging
REGION=us-central1
ZONE=us-central1-a
ENVIRONMENT=staging

# =============================================================================
# Domain Configuration (Optional for staging)
# =============================================================================
# Leave empty to use default Cloud Run URLs
DOMAIN_LANDING=staging.platform.com
DOMAIN_DASHBOARD=dashboard-staging.platform.com
DOMAIN_MEET=meet-staging.platform.com
DOMAIN_WIDGET=widget-staging.platform.com
DOMAIN_API=api-staging.platform.com
DOMAIN_WS=ws-staging.platform.com
DOMAIN_LIVEKIT=livekit-staging.platform.com

# =============================================================================
# Database Configuration (Generated during setup)
# =============================================================================
DATABASE_PASSWORD=CHANGE_ME_32_CHARS
DATABASE_HOST=10.0.0.3
DATABASE_PORT=5432
DATABASE_NAME=platform
DATABASE_USER=platform
SERVICE_DATABASE_USER=platform_service

# Connection strings (will be auto-generated)
DATABASE_URL=postgresql://platform:PASSWORD@HOST:5432/platform
SERVICE_DATABASE_URL=postgresql://platform_service:PASSWORD@HOST:5432/platform

# =============================================================================
# Redis Configuration (Generated during setup)
# =============================================================================
REDIS_PASSWORD=CHANGE_ME_32_CHARS
REDIS_HOST=10.0.0.4
REDIS_PORT=6379
REDIS_URL=redis://:PASSWORD@HOST:6379

# =============================================================================
# LiveKit Configuration
# =============================================================================
LIVEKIT_API_KEY=your-livekit-api-key
LIVEKIT_API_SECRET=your-livekit-api-secret
LIVEKIT_URL=wss://livekit-staging.platform.com

# =============================================================================
# Authentication (Auth.js)
# =============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
NEXTAUTH_SECRET=CHANGE_ME_32_PLUS_CHARS
NEXTAUTH_URL=https://api-staging.platform.com

# OAuth Providers
GOOGLE_CLIENT_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret

# Microsoft OAuth (Optional)
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_TENANT_ID=

# =============================================================================
# AI Providers - PRIMARY (Google Gemini - 85% of requests)
# =============================================================================
GOOGLE_API_KEY=your-google-api-key-here

# Enable Vertex AI for better quotas (recommended)
ENABLE_VERTEX_AI=true
VERTEX_AI_PROJECT=platform-staging
VERTEX_AI_LOCATION=us-central1

# =============================================================================
# AI Providers - SECONDARY (Anthropic Claude - 15% of requests)
# =============================================================================
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# =============================================================================
# AI Providers - Speech
# =============================================================================
# Deepgram Nova-3 (Speech-to-Text)
DEEPGRAM_API_KEY=your-deepgram-api-key-here

# ElevenLabs Turbo v2.5 (Text-to-Speech)
ELEVENLABS_API_KEY=your-elevenlabs-api-key-here

# Cartesia Sonic (TTS fallback)
CARTESIA_API_KEY=your-cartesia-api-key-here

# =============================================================================
# AI Providers - Embeddings
# =============================================================================
# Voyage Multimodal-3 (RAG embeddings)
VOYAGE_API_KEY=your-voyage-api-key-here

# =============================================================================
# Application URLs (Auto-configured by deployment)
# =============================================================================
APP_URL=https://staging.platform.com
DASHBOARD_URL=https://dashboard-staging.platform.com
MEET_URL=https://meet-staging.platform.com
WIDGET_URL=https://widget-staging.platform.com

# =============================================================================
# Monitoring & Observability
# =============================================================================
# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=staging

# Log Level
LOG_LEVEL=info

# =============================================================================
# Cost Tracking & Limits
# =============================================================================
# Daily budget alerts
DAILY_BUDGET_LIMIT_USD=50
MONTHLY_BUDGET_LIMIT_USD=1500

# AI cost limits (per tenant per month)
TENANT_AI_COST_LIMIT_USD=100

# =============================================================================
# Feature Flags (Staging specific)
# =============================================================================
ENABLE_RATE_LIMITING=true
ENABLE_CSRF_PROTECTION=true
ENABLE_ANALYTICS=true
ENABLE_DEBUG_LOGGING=false

# =============================================================================
# Resource Limits (Cloud Run)
# =============================================================================
API_MIN_INSTANCES=0
API_MAX_INSTANCES=10
API_CPU=2
API_MEMORY=4Gi
API_TIMEOUT=300s
API_CONCURRENCY=80

WEBSOCKET_MIN_INSTANCES=1
WEBSOCKET_MAX_INSTANCES=10
WEBSOCKET_CPU=2
WEBSOCKET_MEMORY=4Gi
WEBSOCKET_TIMEOUT=3600s
WEBSOCKET_CONCURRENCY=1000

AGENT_MIN_INSTANCES=1
AGENT_MAX_INSTANCES=5
AGENT_CPU=2
AGENT_MEMORY=4Gi
AGENT_TIMEOUT=3600s
AGENT_CONCURRENCY=10

# =============================================================================
# LiveKit VM Configuration
# =============================================================================
LIVEKIT_MACHINE_TYPE=n2-standard-4
LIVEKIT_DISK_SIZE_GB=50
LIVEKIT_DISK_TYPE=pd-ssd

# =============================================================================
# Database Configuration
# =============================================================================
DB_INSTANCE_TIER=db-n1-standard-1
DB_STORAGE_SIZE_GB=50
DB_BACKUP_HOUR=2
DB_MAINTENANCE_DAY=SUN
DB_MAINTENANCE_HOUR=3

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_MEMORY_SIZE_GB=1
REDIS_TIER=BASIC

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_RETENTION_DAYS=7
ENABLE_POINT_IN_TIME_RECOVERY=true

# =============================================================================
# Security
# =============================================================================
# IP Whitelist for admin access (comma-separated)
ADMIN_IP_WHITELIST=

# CORS Origins (comma-separated)
CORS_ORIGINS=https://staging.platform.com,https://dashboard-staging.platform.com,https://meet-staging.platform.com

# =============================================================================
# CI/CD
# =============================================================================
# GitHub Actions will use these
DEPLOY_ON_PUSH=true
RUN_TESTS_ON_PR=true
ENABLE_AUTO_ROLLBACK=true
ROLLBACK_ERROR_THRESHOLD=5
